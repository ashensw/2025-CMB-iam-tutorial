# ================================================================================
# Pizza Shack API Configuration
# ================================================================================

# Database Configuration
# Production PostgreSQL (replace with your actual connection string)
DATABASE_URL=postgresql://username:password@localhost:5432/pizzashack

# For local development (SQLite fallback)
# DATABASE_URL=sqlite:///./pizza_shack.db

# ================================================================================
# Server Configuration
# ================================================================================
PORT=8000
HOST=0.0.0.0

# ================================================================================
# JWT/OAuth2 Configuration
# ================================================================================
# JWKS endpoint for JWT signature verification (recommended for production)
JWKS_URL=https://api.asgardeo.io/t/your-org/oauth2/jwks

# Alternative: Static JWT secret key (for development/testing only)
# JWT_SECRET_KEY=your-secret-key-here

# JWT validation settings
JWT_ALGORITHM=RS256
JWT_ISSUER=https://api.asgardeo.io/t/your-org/oauth2/token
JWT_AUDIENCE=pizza-app

# ================================================================================
# Authorization Configuration (NEW - Flexible Auth Support)
# ================================================================================
# ENABLE_BACKEND_TOKEN_VALIDATION: true=validate JWT in backend, false=gateway handles validation
ENABLE_BACKEND_TOKEN_VALIDATION=true

# AUTH_HEADER_NAME: Header name to extract JWT token from
# Common Choreo/Gateway patterns:
# - "X-JWT-Assertion" (WSO2 Choreo standard)
# - "X-Access-Token" (custom forwarding)
# - "Authorization" (direct access/local dev)
AUTH_HEADER_NAME=Authorization

# ENABLE_TOKEN_LOGGING: Enable detailed JWT token analysis logging
# Set to false in production for security
ENABLE_TOKEN_LOGGING=true

# ================================================================================
# Deployment Examples
# ================================================================================
# 
# Local Development:
# ENABLE_BACKEND_TOKEN_VALIDATION=true
# AUTH_HEADER_NAME=Authorization
# ENABLE_TOKEN_LOGGING=true
#
# Choreo with JWT forwarding (Hybrid Mode):
# ENABLE_BACKEND_TOKEN_VALIDATION=false
# AUTH_HEADER_NAME=X-JWT-Assertion
# ENABLE_TOKEN_LOGGING=true
#
# Choreo without JWT (Pure Gateway Mode):
# ENABLE_BACKEND_TOKEN_VALIDATION=false
# AUTH_HEADER_NAME=Authorization
# ENABLE_TOKEN_LOGGING=false

# ================================================================================
# CORS Configuration
# ================================================================================
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_METHODS=*
CORS_HEADERS=*
CORS_CREDENTIALS=true

# ================================================================================
# Logging Configuration
# ================================================================================
LOG_LEVEL=INFO

# ================================================================================
# WSO2 Choreo Configuration (for deployment)
# ================================================================================
CHOREO_PROJECT_ID=your-project-id
CHOREO_ENVIRONMENT=development